<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>nicheware.platform.utilities.common.graphics documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/tree.css" /></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">cljc-common</span> <span class="project-version">1.0.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Introduction</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nicheware</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>platform</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utilities</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></div></li><li class="depth-5 branch"><a href="nicheware.platform.utilities.common.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-5 branch"><a href="nicheware.platform.utilities.common.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-5 current"><a href="nicheware.platform.utilities.common.graphics.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphics</span></div></a></li><li class="depth-6 branch"><a href="nicheware.platform.utilities.common.graphics.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-6 branch"><a href="nicheware.platform.utilities.common.graphics.interpolate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interpolate</span></div></a></li><li class="depth-6"><a href="nicheware.platform.utilities.common.graphics.line.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>line</span></div></a></li><li class="depth-5 branch"><a href="nicheware.platform.utilities.common.math.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>math</span></div></a></li><li class="depth-5"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></div></li><li class="depth-6"><a href="nicheware.platform.utilities.common.state.migration.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>migration</span></div></a></li><li class="depth-5"><a href="nicheware.platform.utilities.common.version.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>version</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="nicheware.platform.utilities.common.graphics.html#var-aspect-ratio"><div class="inner"><span>aspect-ratio</span></div></a></li><li class="depth-1"><a href="nicheware.platform.utilities.common.graphics.html#var-fit-to-dimensions"><div class="inner"><span>fit-to-dimensions</span></div></a></li><li class="depth-1"><a href="nicheware.platform.utilities.common.graphics.html#var-fit-to-height"><div class="inner"><span>fit-to-height</span></div></a></li><li class="depth-1"><a href="nicheware.platform.utilities.common.graphics.html#var-fit-to-width"><div class="inner"><span>fit-to-width</span></div></a></li><li class="depth-1"><a href="nicheware.platform.utilities.common.graphics.html#var-position-to-dimensions"><div class="inner"><span>position-to-dimensions</span></div></a></li><li class="depth-1"><a href="nicheware.platform.utilities.common.graphics.html#var-reverse-transform"><div class="inner"><span>reverse-transform</span></div></a></li><li class="depth-1"><a href="nicheware.platform.utilities.common.graphics.html#var-translate-shapes"><div class="inner"><span>translate-shapes</span></div></a></li><li class="depth-1"><a href="nicheware.platform.utilities.common.graphics.html#var-update-fill-colors"><div class="inner"><span>update-fill-colors</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">nicheware.platform.utilities.common.graphics</h1><div class="doc"><div class="markdown"><p>Functions useful in graphics and drawing calculations.</p>
<p>There are groups of functions within the graphics namespace that deal with:</p>
<table>
  <thead>
    <tr>
      <th>Function group</th>
      <th>Functions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>size fitting</td>
      <td><a href="nicheware.platform.utilities.common.graphics.html#var-aspect-ratio">aspect-ratio</a>, <a href="nicheware.platform.utilities.common.graphics.html#var-fit-to-height">fit-to-height</a>, <a href="nicheware.platform.utilities.common.graphics.html#var-fit-to-width">fit-to-width</a>, <a href="nicheware.platform.utilities.common.graphics.html#var-fit-to-dimensions">fit-to-dimensions</a>, <a href="nicheware.platform.utilities.common.graphics.html#var-position-to-dimensions">position-to-dimensions</a>, <a href="nicheware.platform.utilities.common.graphics.html#var-reverse-transform">reverse-transform</a></td>
    </tr>
    <tr>
      <td>shapes</td>
      <td><a href="nicheware.platform.utilities.common.graphics.html#var-update-fill-colors">update-fill-colors</a>, <a href="nicheware.platform.utilities.common.graphics.html#var-translate-shapes">translate-shapes</a></td>
    </tr>
  </tbody>
</table>
<p>In these functions the following logical data types are supported:</p>
<p><strong>dimensions</strong>:</p>
<pre><code class="clojure">{:width 100
 :height 20}
</code></pre>
<p><strong>transform</strong>:</p>
<pre><code class="clojure">{:x 10
 :y 20
 :scale 0.5}
</code></pre>
<p><strong>shape</strong>:</p>
<pre><code class="clojure">{:shape :rect
 :x 10
 :y 30
 :width 100
 :height 30
 :fill-color 3}
</code></pre>
<p>The actual units and meaning of these fields is up to the code using these structures for drawing. These functions just update the values as requested.</p></div></div><div class="public anchor" id="var-aspect-ratio"><h3>aspect-ratio</h3><div class="usage"><code>(aspect-ratio {:keys [width height], :as dimensions})</code></div><div class="doc"><div class="markdown"><p>Computes the aspect ratio of the dimensions (represented as a map).</p>
<ul>
  <li>dimensions: Dimension to calculate aspect ratio for. <code>{:width :height}</code></li>
  <li>returns: aspect ratio, as a float.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/nicheware/cljc-common/blob/master/src/cljc/nicheware/platform/utilities/common/graphics.cljc#L48">view source</a></div></div><div class="public anchor" id="var-fit-to-dimensions"><h3>fit-to-dimensions</h3><div class="usage"><code>(fit-to-dimensions containing-dimensions dimensions-to-fit)</code></div><div class="doc"><div class="markdown"><p>Does a fit to size calculation of the dimensions-to-fit, within the containing-dimension.</p>
<ul>
  <li>containing-dimensions: outer dimensions setting maximum width and height, <code>{:width :height}</code></li>
  <li>dimensions-to-fit: dimension defining the aspect ratio of the final dimension to fit inside containing-dimensions. <code>{:width :height}</code></li>
  <li>returns: a map <code>{:width :height :scale}</code></li>
</ul>
<p>where:</p>
<ul>
  <li>width and height will retain the aspect ratio of dimensions-to-fit,</li>
  <li>either width or height will equal the width or height of containing-dimensions</li>
  <li>x and y will centre either horizontally or vertically depending on the best fit.</li>
  <li>scale will be the scale factor to apply to width and height of dimensions-to-fit to get the new returned width and height.</li>
</ul>
<p>eg:</p>
<pre><code class="clojure">(fit-to-dimensions {:width 100 :height 100} {:width 10 :height 20})
=&gt;
{:width 50.0, :height 100, :x 25.0, :y 0, :scale 5.0}
</code></pre></div></div><div class="src-link"><a href="https://github.com/nicheware/cljc-common/blob/master/src/cljc/nicheware/platform/utilities/common/graphics.cljc#L126">view source</a></div></div><div class="public anchor" id="var-fit-to-height"><h3>fit-to-height</h3><div class="usage"><code>(fit-to-height {:keys [width height], :as containing-dimensions} {fit-width :width, fit-height :height, :as dimensions-to-fit})</code></div><div class="doc"><div class="markdown"><p>Does a fit to height calculation of the dimensions-to-fit, within the containing-dimension.</p>
<ul>
  <li>containing-dimensions and dimensions-to-fit are both <code>{:width :height}</code></li>
  <li>returns: a map <code>{:width :height :x :y :scale}</code></li>
</ul>
<p>where:</p>
<ul>
  <li>width and height will retain the aspect ratio of dimensions-to-fit,</li>
  <li>height will equal the height of containing-dimensions</li>
  <li>x will be translation to position centrally, and y is 0</li>
  <li>scale will be the scale factor to apply to width and height of dimensions-to-fit to get the new returned width and height.</li>
</ul>
<p>eg:</p>
<pre><code class="clojure">(fit-to-height {:width 100 :height 100} {:width 10 :height 20})
=&gt;
{:width 50.0, :height 100, :x 25.0, :y 0, :scale 5.0}
</code></pre></div></div><div class="src-link"><a href="https://github.com/nicheware/cljc-common/blob/master/src/cljc/nicheware/platform/utilities/common/graphics.cljc#L57">view source</a></div></div><div class="public anchor" id="var-fit-to-width"><h3>fit-to-width</h3><div class="usage"><code>(fit-to-width {:keys [width height], :as containing-dimensions} {fit-width :width, fit-height :height, :as dimensions-to-fit})</code></div><div class="doc"><div class="markdown"><p>Does a fit to width calculation of the dimensions-to-fit, within the containing-dimension.</p>
<ul>
  <li>containing-dimensions: outer dimensions setting maximum width and height, <code>{:width :height}</code></li>
  <li>dimensions-to-fit: dimension defining the aspect ratio of the final dimension to fit inside containing-dimensions. <code>{:width :height}</code></li>
  <li>returns: a map <code>{:width :height :x :y :scale}</code></li>
</ul>
<p>where:</p>
<ul>
  <li>width and height will retain the aspect ratio of dimensions-to-fit,</li>
  <li>width will equal the width of containing-dimensions</li>
  <li>x will be 0 as we fill the entire area</li>
  <li>y will ensure it is centered in the new area.</li>
  <li>scale will be the scale factor to apply to width and height of dimensions-to-fit to get the new returned width and height.</li>
</ul>
<p>eg:</p>
<pre><code class="clojure">(fit-to-width {:width 100 :height 100} {:width 10 :height 20})
=&gt;
{:width 100, :height 200.0, :x 0, :y -50.0, :scale 10.0}
</code></pre></div></div><div class="src-link"><a href="https://github.com/nicheware/cljc-common/blob/master/src/cljc/nicheware/platform/utilities/common/graphics.cljc#L91">view source</a></div></div><div class="public anchor" id="var-position-to-dimensions"><h3>position-to-dimensions</h3><div class="usage"><code>(position-to-dimensions containing-dimensions dimensions-to-fit)</code></div><div class="doc"><div class="markdown"><p>Same calculation as <a href="nicheware.platform.utilities.common.graphics.html#var-fit-to-dimensions">fit-to-dimensions</a>, but doesn’t bother returning the new width and height of the shape being fit  but instead the width and the height of the containing area, along with the x, y and scale needed to position  the shape within this area.</p>
<ul>
  <li>containing-dimensions: outer dimensions setting maximum width and height, <code>{:width :height}</code></li>
  <li>dimensions-to-fit: dimension defining the aspect ratio of the final dimension to fit inside containing-dimensions. <code>{:width :height}</code></li>
  <li>returns a map <code>{:width :height :x :y :scale}</code></li>
</ul>
<p>where:</p>
<ul>
  <li>width and height will be that of the containing-dimensions,</li>
  <li>x and y will centre either horizontally or vertically depending on the best fit.</li>
  <li>scale will be the scale factor to apply to width and height of dimensions-to-fit to fit the dimensions-to-fit within containing-dimensions</li>
</ul>
<p>eg:</p>
<pre><code class="clojure">(position-to-dimensions {:width 100 :height 100} {:width 10 :height 20})
=&gt;
{:width 100, :height 100, :x 25.0, :y 0, :scale 5.0}
</code></pre></div></div><div class="src-link"><a href="https://github.com/nicheware/cljc-common/blob/master/src/cljc/nicheware/platform/utilities/common/graphics.cljc#L155">view source</a></div></div><div class="public anchor" id="var-reverse-transform"><h3>reverse-transform</h3><div class="usage"><code>(reverse-transform x y {:keys [scale], trans-x :x, trans-y :y, :as transform})</code></div><div class="doc"><div class="markdown"><p>Performs a reverse transformation of the co-ordinates, that have previously been transformed according to the x, y translate and scale defined in dimensions.</p>
<p>Useful for converting mouse co-ordinates in a transform co-ordinate space to model co-ordinates.</p>
<ul>
  <li>x: X co-ordinate in source space.</li>
  <li>y: Y co-ordinate in source space.</li>
  <li>transform: Original transform applied to get the supplied x, y. <code>{:scale :x :y}</code></li>
  <li>returns: x, y after applying reverse of transform to given x and y. <code>{:x :y}</code></li>
</ul></div></div><div class="src-link"><a href="https://github.com/nicheware/cljc-common/blob/master/src/cljc/nicheware/platform/utilities/common/graphics.cljc#L183">view source</a></div></div><div class="public anchor" id="var-translate-shapes"><h3>translate-shapes</h3><div class="usage"><code>(translate-shapes shapes trans-x trans-y)</code></div><div class="doc"><div class="markdown"><p>Updates the position all shapes in the given collection, translating the :x and :y locations by the given amounts.</p>
<ul>
  <li>shapes: Collection of shapes, where each shape is a map of the form: <code>{:fill-color ...}</code></li>
  <li>trans-x: Amount to transform each shape x value by.</li>
  <li>trans-y: Amount to transform each shape y value by.</li>
  <li>returns: Collection of shapes where all shape x and y have been translated as specified.</li>
</ul>
<pre><code class="clojure">(translate-shapes [{:shape :point :x 1 :y 1 :fill-color 2}
                   {:shape :square :x 10 :y 10 :width 10 :fill-color 4}] 2 3)
  =&gt;
[{:shape :point :x 3 :y 4 :fill-color 2}
 {:shape :square :x 12 :y 13 :width 10 :fill-color 4}]
</code></pre></div></div><div class="src-link"><a href="https://github.com/nicheware/cljc-common/blob/master/src/cljc/nicheware/platform/utilities/common/graphics.cljc#L225">view source</a></div></div><div class="public anchor" id="var-update-fill-colors"><h3>update-fill-colors</h3><div class="usage"><code>(update-fill-colors shapes fill-color)</code></div><div class="doc"><div class="markdown"><p>Updates the fill color for every shape in a collection of shapes.</p>
<p>Shapes will typically have a number of attributes (eg <code>:x, :y</code>), but the only assumption  of this function is that color is specified with the <code>:fill-color</code> key.</p>
<ul>
  <li>shapes: Collection of shapes, where each shape is a map of the form: <code>{:fill-color ...}</code></li>
  <li>fill-color: New fill color to set for each shape.</li>
  <li>returns: Collection of shapes, where each shape has the supplied :fill-color.</li>
</ul>
<p>eg:</p>
<pre><code class="clojure">(update-fill-colors [{:shape :point :x 1 :y 1 :fill-color 2}
                     {:shape :square :x 10 :y 10 :width 10 :fill-color 4}] 5)
  =&gt;
[{:shape :point :x 1 :y 1 :fill-color 5}
 {:shape :square :x 10 :y 10 :width 10 :fill-color 5}]
</code></pre></div></div><div class="src-link"><a href="https://github.com/nicheware/cljc-common/blob/master/src/cljc/nicheware/platform/utilities/common/graphics.cljc#L203">view source</a></div></div></div></body></html>